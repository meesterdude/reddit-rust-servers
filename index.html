<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Reddit-rust-servers by meesterdude</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <link rel="stylesheet" href="stylesheets/jquery.dataTables.css">
    <link rel="stylesheet" href="stylesheets/jquery.dataTables_themeroller.css">
    <link rel="stylesheet" href="stylesheets/jquery-ui.css">
    <link rel="stylesheet" href="stylesheets/colvis.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <script src="javascripts/jquery.js"></script>
    <script src="javascripts/jquery.dataTables.js"></script>
    <script src="javascripts/ColVis.min.js"></script>

    <script src="javascripts/jquery.dataTables.columnFilter.js"></script>



    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/meesterdude/reddit-rust-servers">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/meesterdude/reddit-rust-servers/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/meesterdude/reddit-rust-servers/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Reddit-rust-servers</h1>
          <p>Servers for the game rust, sourced from JSON</p>
        </div>
      </section>
    </div>
    <section class='table'>
      <p>When using range filters, you may need to display all columns</p>
    <table width="100%" cellpadding="0" cellspacing="0" border="0" class="display" id="main">
      <thead>
        <tr></tr>
      </thead>
      <tbody>
      </tbody>
        <tfoot>
        <tr>
        </tr>
      </tfoot>
    </table>
  </section>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

  </body>

     <script type="text/javascript">
    $(document).ready(function() {

      headers = ["name", "ip", "post", "About", "Location", "Donations", "PVP", "slots", "Admin Powers", "Admins", "Sleepers", "Airdrop Min. Players", "Mini-Games", "site", "forum", "Server launched", "Entry updated"]
      hide_cols = ["About", "Donations", "Admins", "Server launched", "Entry updated",
      "site", "forum", "Mini-Games", "post"]
      rows = new Array()
      $.getJSON("./servers.json?33", function(data){
        $.each(data.servers, function(i,server){
          var row = []
          $.each(headers, function(index, val){
            row.push(server[val] || '-')
          })
          rows.push(row);
        });
        $.each(headers, function(i, header){
          $('#main thead tr').append("<th>" + header + "</th>")
          $('#main tfoot tr').append("<th>" + header + "</th>")
        });
        $.each(rows, function(i,row){
          content_row = "<tr>"
          $.each(row, function(pos,val){
            content_row +="<td>" + val + "</td>"
          });
          content_row += "</tr>"
          $('#main tbody').append(content_row);
        });

        var oTable = $('#main').dataTable(
          {
            "sDom": 'RC<"clear">lfrtip',
          }).columnFilter({
            //TODO: make part of headers
            aoColumns: [
              {type: "text"},
              {type: "text"},
              {type: "text"},
              {type: "text"},
              {type: "select"},
              {type: "select"},
              {type: "select"},
              {type: "number-range"},
              {type: "select"},
              {type: "text"},
              {type: "select"},
              {type: "number-range"},
              {type: "select"},
              {type: "text"},
              {type: "text"},
              null,
              null
            ]
        });
        // hack to hide columns
        $("button.ColVis_MasterButton").trigger("click");
        $.each(hide_cols, function(i, col){
          $("button.TableTools_Button:contains(" + col + ")").click();
        });
      });
    });
   </script>
</html>